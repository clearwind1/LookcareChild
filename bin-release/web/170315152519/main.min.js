var BGMPlayer=function(){function t(){this.init()}var e=(__define,t),i=e.prototype;return i.init=function(){this.curbgmtag=-1,this.volume=GameConfig._i().bgamemusic?1:0},i.setVolme=function(t){this.volume=t,GameData._i().gamesound[this.curbgmtag].setvolume(this.volume)},i.play=function(t){-1!=this.curbgmtag&&GameData._i().gamesound[this.curbgmtag]&&GameData._i().gamesound[this.curbgmtag].stop(),this.curbgmtag=t,GameData._i().gamesound[this.curbgmtag]&&(GameData._i().gamesound[this.curbgmtag].play(0,-1),GameData._i().gamesound[this.curbgmtag].setvolume(this.volume))},t._i=function(){return null==this._instance&&(this._instance=new t),this._instance},t._instance=null,t}();egret.registerClass(BGMPlayer,"BGMPlayer");var GameUtil;!function(t){var e=function(t){function e(e){t.call(this),this.mStageW=egret.MainContext.instance.stage.stageWidth,this.mStageH=egret.MainContext.instance.stage.stageHeight,e&&(this.params=e),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){this.params?this.init(this.params):this.init()},n.init=function(t){},e}(egret.DisplayObjectContainer);t.BassPanel=e,egret.registerClass(e,"GameUtil.BassPanel");var i=function(){function t(){}var e=(__define,t);e.prototype;return t.init=function(t){this.MainStage=t},t.runscene=function(t,e,i){if(void 0===e&&(e=SceneEffect.NullAction),void 0===i&&(i=800),null==this.curScene)return this.curScene=t,void this.MainStage.addChild(this.curScene);if(e==SceneEffect.NullAction)return null!=this.curScene&&this.MainStage.removeChild(this.curScene),this.curScene=t,void this.MainStage.addChild(this.curScene);this.nextScene=t,this.MainStage.addChild(this.nextScene),e==SceneEffect.TransAlpha&&(this.nextScene.alpha=0,egret.Tween.get(this.curScene).to({alpha:0},i),egret.Tween.get(this.nextScene).to({alpha:1},i)),e==SceneEffect.CrossLeft&&(this.nextScene.x=-this.MainStage.stageWidth,egret.Tween.get(this.curScene).to({x:this.MainStage.stageWidth},i),egret.Tween.get(this.nextScene).to({x:0},i)),e==SceneEffect.OpenDoor;var n=this;egret.setTimeout(function(){n.MainStage.removeChild(n.curScene),n.curScene=n.nextScene},this,i)},t.curScene=null,t.nextScene=null,t.MainStage=null,t}();t.GameScene=i,egret.registerClass(i,"GameUtil.GameScene")}(GameUtil||(GameUtil={}));var ControlPanel=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(){this.active=!1;var t=new MyBitmap(RES.getRes("controlp_png"),this.mStageW/2,GameUtil.absposy(210));this.addChild(t),t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.DirTouchBegin,this),t.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.DirTouchMove,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.DirTouchEnd,this),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.DirTouchCancel,this);for(var e=[[195,78],[295,190],[195,295],[86,190]],i=Direction.UP;i<Direction.END;i++){var n=new MyBitmap(RES.getRes("spear_png"));n.name=""+i,n.$setScaleX(1.3),n.$setScaleY(1.3),n.alpha=0,this.addChild(n),GameUtil.relativepos(n,t,e[i][0],e[i][1])}var a=new GameUtil.Menu(this,"spear_png","spear_png",this.att);a.setBtnScale(1.6,1.6),this.addChild(a),GameUtil.relativepos(a,t,195,190);for(var s=["spear_png","bow_png"],r=Weapon.SPEAR;r<Weapon.END;r++){var o=new GameUtil.Menu(this,s[r],s[r],this.switchweapon,[r,a]);o.setBtnScale(1.3,1.3),this.addChild(o),o.setBtnSound(GameData._i().gamesound[SoundName.click]),GameUtil.relativepos(o,t,-75+525*r,222)}},n.switchweapon=function(t,e){if(t!=PlayerData._i().curweapon){PlayerData._i().curweapon=t;var i=["spear_png","bow_png"];e.setButtonTexture(i[t],i[t]);var n=this.parent;n.getPlayer().switchweapon()}},n.att=function(){var t=this.parent;t.getPlayer().att()},n.DirTouchBegin=function(t){if(!this.active){this.active=!0;for(var e=Direction.UP;e<Direction.END;e++){var i=this.getChildByName(""+e),n=parseInt(i.name);if(i.hitTestPoint(t.$stageX,t.stageY)){PlayerData._i().curDir=n;break}}}},n.DirTouchMove=function(t){if(this.active)for(var e=Direction.UP;e<Direction.END;e++){var i=this.getChildByName(""+e),n=parseInt(i.name);if(i.hitTestPoint(t.$stageX,t.stageY)&&PlayerData._i().curDir!=n){PlayerData._i().curDir=n;break}}},n.DirTouchEnd=function(t){this.active&&(this.active=!1,PlayerData._i().curDir=Direction.END)},n.DirTouchCancel=function(t){this.active&&(this.active=!1,PlayerData._i().curDir=Direction.END)},e}(GameUtil.BassPanel);egret.registerClass(ControlPanel,"ControlPanel");var EnemyType;!function(t){t[t.SOLDIER=0]="SOLDIER",t[t.GENERAL=1]="GENERAL",t[t.END=2]="END"}(EnemyType||(EnemyType={}));var EnemySprite=function(t){function e(){t.call(this),this.spframe=[4,10]}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(){this.intervalarr=[],this.gamelevel=RandomUtils.limitInteger(1,8),8==this.gamelevel&&RandomUtils.limitInteger(0,100)<50&&(this.gamelevel=RandomUtils.limitInteger(1,7)),this.bdie=!1,this.anispeed=GameUtil.MAX(30,80-GameData._i().GameLevel);var t=[[-50,-50],[-50,this.mStageH/2],[-50,this.mStageH-50],[this.mStageW+50,-50],[this.mStageW+50,this.mStageH/2],[this.mStageW+50,this.mStageH-50]],e="enemyrun"+this.gamelevel;this.sp=new Animation(e,this.spframe[RoleState.RUN],this.anispeed,t[this.dir][0],t[this.dir][1]);var i=this.dir>2?1:-1;this.sp.$setScaleX(i),this.addChild(this.sp),this.sp.setLoop(-1),this.sp.play(),this.life=new Lifesprite(this.gamelevel),this.life.$setScaleX(.7),this.life.$setScaleY(.7),this.life.x=this.sp.x,this.life.y=this.sp.y-this.sp.height/2-30,this.addChild(this.life)},n.initdata=function(t,e){this.type=t,this.dir=e},n.start=function(){var t=this.mStageW/2,e=this.mStageH/2,i=GameUtil.MAX(3e3,12e3-250*GameData._i().GameLevel);egret.Tween.get(this.sp).to({x:t,y:e},i),egret.Tween.get(this.life).to({x:t,y:e-this.sp.height/2-30},i).call(this.att,this)},n.att=function(){var t="enemyatt"+this.gamelevel;this.sp.switchani(t,this.spframe[RoleState.ATT],0,!0,40),this.sp.setendcall(this.attplayer,this)},n.attplayer=function(){PlayerData._i().curlife--,GameUtil.GameScene.curScene.getPlayer().updatalife(),this.parent.removeChild(this)},n.beatt=function(t,e){void 0===e&&(e=!1),GameData._i().gamesound[SoundName.beatt].play(),this.life.sublife(t),!this.bdie&&this.life.getlife()<=0&&this.die(e)},n.die=function(t){this.bdie=!0,this.sp.stop(),GameUtil.clearinterval(this.intervalarr),egret.Tween.removeTweens(this.sp),egret.Tween.removeTweens(this.life);var e=this;egret.Tween.get(this).to({visible:!1},100).to({visible:!0},100).to({visible:!1},100).to({visible:!0},100).to({visible:!1},100).call(function(){if(e.parent.removeChild(e),GameData._i().gamesound[SoundName.die].play(),GameData._i().gamesound[SoundName.goal].play(),8==e.gamelevel?PlayerData._i().UserInfo.killgeneral++:PlayerData._i().UserInfo.killsoldier++,e.gamelevel%8==0?PlayerData._i().UserInfo.jifen+=2+4*GameData._i().GameLevel:PlayerData._i().UserInfo.jifen+=2+2*GameData._i().GameLevel,!t){var i=1;PlayerData._i().curenergy=PlayerData._i().curenergy+i,PlayerData._i().curenergy>GameConfig.PLAYERENERGY?PlayerData._i().curenergy=GameConfig.PLAYERENERGY:GameUtil.GameScene.curScene.getPlayer().updataenergy(i)}},this)},n.getsp=function(){return this.sp},e}(GameUtil.BassPanel);egret.registerClass(EnemySprite,"EnemySprite");var GameData=function(){function t(){this.gamesound=[],this.init()}var e=(__define,t),i=e.prototype;return i.init=function(){this.GamePause=!1,this.GameOver=!1,this.isLoadingend=!1,this.GameLevel=0},t._i=function(){return this._inst=null==this._inst?new t:this._inst},t._inst=null,t}();egret.registerClass(GameData,"GameData");var Othercontainer=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(){this.touchEnabled=!0;var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,.6);this.addChild(t),this.show()},n.show=function(){},n.close=function(){egret.Tween.removeAllTweens(),this.removeChildren(),this.parent.removeChild(this)},e}(GameUtil.BassPanel);egret.registerClass(Othercontainer,"Othercontainer");var GameHelpPageShow=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.show=function(){var t=this,e=2,i=0,n=new MyBitmap(RES.getRes("helpbg_png"),this.mStageW/2,this.mStageH/2);this.addChild(n),n.touchEnabled=!0;var a=new egret.DisplayObjectContainer;this.addChild(a);for(var s=egret.Point.create(280,290),r=85,o=0;e+1>o;o++){var h=new MyBitmap(RES.getRes("helppagepoint_png"));this.addChild(h),GameUtil.relativepos(h,n,s.x+r*o,s.y)}var l=new MyBitmap(RES.getRes("helpselect_png"));this.addChild(l),GameUtil.relativepos(l,n,s.x,s.y);var u=new GameUtil.Menu(this,"closebtn_png","closebtn_png",this.close);this.addChild(u),GameUtil.relativepos(u,n,580,27);var c=0;n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(t){c=t.stageX},this),n.addEventListener(egret.TouchEvent.TOUCH_END,function(o){var h=o.stageX;h-c>=100?i=++i>e?0:i:c-h>100&&(i=--i<0?e:i),t.helpcurcontain(a,n,i),GameUtil.relativepos(l,n,s.x+r*i,s.y)},this),this.helpcurcontain(a,n,0)},n.helpcurcontain=function(t,e,i){t.removeChildren();var n=new GameUtil.MyTextField(0,0,40,0,0);if(n.setText(""),n.setSize(50),n.width=290,t.addChild(n),n.textColor=9462056,GameUtil.relativepos(n,e,280,87),0==i){var a=new MyBitmap(RES.getRes("help_controlimg_png"),0,0);t.addChild(a),GameUtil.relativepos(a,e,135,140),n.text="使用摇杆控制角色移动"}else if(1==i){var a=new MyBitmap(RES.getRes("spear_png"),0,0);t.addChild(a),GameUtil.relativepos(a,e,110,102);var s=new MyBitmap(RES.getRes("bow_png"),0,0);t.addChild(s),GameUtil.relativepos(s,e,110,214),n.setSize(45),n.width=340,n.text="点击枪图标为近身攻击，弓箭为远程攻击。",GameUtil.relativepos(n,e,230,87)}else 2==i&&(n.setSize(40),n.width=460,n.text="小赵是无敌的，只需保护小朋友阿斗不被敌军攻击，直到撑到最后一秒。",GameUtil.relativepos(n,e,110,87))},e}(Othercontainer);egret.registerClass(GameHelpPageShow,"GameHelpPageShow");var GameOverPageShow=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.show=function(){if(GameConfig.DEBUG){var t={id:PlayerData._i().UserInfo.ID,score:PlayerData._i().UserInfo.jifen};GameUtil.Http.getinstance().send(t,"/"+GameConfig.SERVERNAME+"/addrank",this.showscene,this)}else{var e={code:1};this.showscene(e)}},n.showscene=function(t){if(console.log("data-====",t.msg),1==t.code){var e=new MyBitmap(RES.getRes("gameoverbg_png"),this.mStageW/2,this.mStageH/2);this.addChild(e);var i=new MyBitmap(RES.getRes("gameovertext_png"));this.addChild(i),GameUtil.relativepos(i,e,233,61);for(var n="normalbtn_png",a=["炫耀","退出","重来"],s=[this.share,this.turnback,this.relife],r=0;3>r;r++){var o=new GameUtil.Menu(this,n,n,s[r]);o.addButtonText(a[r],35),this.addChild(o),o.getBtnText().textColor=16777215,o.getBtnText().$setBold(!0),GameUtil.relativepos(o,e,75+155*r,470)}for(var h=this.parent,l=["杀敌:","时长:","杀将:","总分:"],u=DateUtils.getFormatBySecond(h.getcurTime()),c=[PlayerData._i().UserInfo.killsoldier,u,PlayerData._i().UserInfo.killgeneral,PlayerData._i().UserInfo.jifen],r=0;4>r;r++){var g=60,d=115,m=new GameUtil.MyTextField(0,0+60*r,50,0,0);m.setText(l[r]),m.textColor=9462056,this.addChild(m),GameUtil.relativepos(m,e,g,d+60*r);var f=new GameUtil.MyTextField(130,0+60*r,50,0,0);f.setText(c[r]),f.textColor=9462056,this.addChild(f),GameUtil.relativepos(f,e,g+130,d+60*r)}}else t.msg},n.share=function(){GameUtil.isSomeType(GameConfig.WeiXinstr)?this.addChild(new SharePageShow):this.addChild(new GameUtil.TipsPanel(null,"请在微信中打开",!0))},n.turnback=function(){PlayerData._i().initdata(),GameData._i().GameOver=!1,GameData._i().GameLevel=0,this.close(),GameUtil.GameScene.runscene(new StartGameScene)},n.relife=function(){PlayerData._i().initdata(),GameData._i().GameOver=!1,GameData._i().GameLevel=0,this.parent.reset(),this.close()},e}(Othercontainer);egret.registerClass(GameOverPageShow,"GameOverPageShow");var GameRankPageShow=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.show=function(){var t={};GameUtil.Http.getinstance().send(t,"/"+GameConfig.SERVERNAME+"/getrank",this.getRank,this)},n.getRank=function(t){if(1==t.code){var e=t.result,i=new MyBitmap(RES.getRes("rankbg_png"),this.mStageW/2,this.mStageH/2);this.addChild(i);for(var n=["序号","ID","总分"],a=0;3>a;a++){var s=new GameUtil.MyTextField(0,0,40);s.setText(n[a]),s.textColor=9462056,this.addChild(s),GameUtil.relativepos(s,i,108+190*a,111)}var r=new GameUtil.ScrollView(518,450);this.addChild(r),GameUtil.relativepos(r,i,62,142),console.log("result====",e.length);for(var o=0;o<e.length;o++){var h=new MyBitmap(RES.getRes("rankcontain"+o%7+"_png"),259,26+64*o);r.putItem(h);var l=new MyBitmap(RES.getRes("ranknum_png"),45,30+64*o);r.putItem(l);var u=new GameUtil.MyTextField(45,25+64*o,30);u.setText(o+1+""),u.textColor=11100416,r.putItem(u);var c=new GameUtil.MyTextField(235,26+64*o,40,.5);c.setText("sxd-"+e[o].id),c.textColor=16777215,r.putItem(c);var g=new GameUtil.MyTextField(423,26+64*o,40,.5);g.setText(""+e[o].score),g.textColor=16777215,r.putItem(g)}var d=new GameUtil.Menu(this,"closebtn_png","closebtn_png",this.close);this.addChild(d),GameUtil.relativepos(d,i,600,80)}else GameUtil.trace(t.msg)},e}(Othercontainer);egret.registerClass(GameRankPageShow,"GameRankPageShow");var GameScene=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(){BGMPlayer._i().play(SoundName.gamebgm),this.showbg()},n.showbg=function(){this.intervalarr=[];var t=new MyBitmap(RES.getRes("gamebg_jpg"),0,0);t.setanchorOff(0,0),t.width=this.mStageW,t.height=this.mStageH,this.addChild(t),this.enemyContain=new egret.DisplayObjectContainer,this.addChild(this.enemyContain),this.player=new Player,this.addChild(this.player);var e={x:GameUtil.absposx(100),y:40,size:35,color:16777215};this.gametime=new TimePanel,this.gametime.initdata(TimeType.ADDTIME,0,!0,e),this.addChild(this.gametime),this.gametime.start(),this.addChild(new ControlPanel),this.gameinterval()},n.gameinterval=function(){GameUtil.trace("interval"),this.intervalarr.push(egret.setInterval(this.createEnemy,this,3e3)),this.intervalarr.push(egret.setInterval(this.updateGamelevel,this,3e4))},n.updateGamelevel=function(){GameData._i().GameLevel++},n.getPlayer=function(){return this.player},n.getcurTime=function(){return this.gametime.getCurTime()},n.createEnemy=function(){if(!GameData._i().GamePause)for(var t=-1,e=0;e<=GameUtil.MIN(Math.floor(GameData._i().GameLevel/3),4);e++){var i=new EnemySprite,n=RandomUtils.limitInteger(0,5);t!=n?t=n:(t++,t%=5),i.initdata(EnemyType.SOLDIER,t),this.enemyContain.addChild(i),i.start()}},n.gameover=function(){GameUtil.trace("gameover"),this.gametime.stop(),egret.Tween.removeAllTweens(),GameData._i().GameOver=!0,this.clearinter(),this.addChild(new GameOverPageShow)},n.reset=function(){this.enemyContain.removeChildren(),this.gameinterval(),this.player.reset(),this.gametime.start()},n.clearinter=function(){GameUtil.clearinterval(this.intervalarr);for(var t=0;t<this.enemyContain.numChildren;t++){var e=this.enemyContain.getChildAt(t);GameUtil.clearinterval(e.intervalarr)}},e}(GameUtil.BassPanel);egret.registerClass(GameScene,"GameScene");var GameSetting=function(t){function e(){t.call(this),this.soundswitch=[]}__extends(e,t);var i=(__define,e),n=i.prototype;return n.show=function(){this.soundswitch[1]=GameConfig._i().bgamesound,this.soundswitch[0]=GameConfig._i().bgamemusic,this.switchbtn=[];var t=new MyBitmap(RES.getRes("settingbg_png"),this.mStageW/2,this.mStageH/2);this.addChild(t);for(var e=0;2>e;e++){var i=new MyBitmap(RES.getRes("settingswitch_png"));this.addChild(i);var n=522,a=400,s=this.soundswitch[e]?n:a;GameUtil.relativepos(i,t,s,132+122*e);var r=this.soundswitch[e]?"settingswitchon_png":"settingswitchoff_png";this.switchbtn[e]=new GameUtil.Menu(this,r,r,this.settingswitch,[e,i,n-a]),this.addChild(this.switchbtn[e]),this.swapChildren(i,this.switchbtn[e]),GameUtil.relativepos(this.switchbtn[e],t,460,132+122*e)}var o=new GameUtil.Menu(this,"closebtn_png","closebtn_png",this.close);this.addChild(o),GameUtil.relativepos(o,t,596,27)},n.settingswitch=function(t,e,i){this.soundswitch[t]=!this.soundswitch[t],e.x+=this.soundswitch[t]?i:-i;var n=this.soundswitch[t]?"settingswitchon_png":"settingswitchoff_png";this.switchbtn[t].setButtonTexture(n,n),GameConfig._i().bgamesound=this.soundswitch[1],GameConfig._i().bgamemusic=this.soundswitch[0];var a=GameConfig._i().bgamemusic?"1":"0",s=GameConfig._i().bgamesound?"1":"0";GameUtil.saveLocalData(GameConfig.GAMEMUSIC,a),GameUtil.saveLocalData(GameConfig.GAMESOUND,s);var r=GameConfig._i().bgamemusic?1:0;BGMPlayer._i().setVolme(r)},e}(Othercontainer);egret.registerClass(GameSetting,"GameSetting");var AdaptGamelayer=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initlayer=function(t){this.maxheight=t},n.putItme=function(t){this.addChild(t)},n.adpat=function(t){void 0===t&&(t=!0);var e=1;this.$getHeight()>this.maxheight&&(e=this.maxheight/this.$getHeight(),t?this.scaleX=this.scaleY=e:this.scaleY=e);var i=(this.mStageW-this.$getWidth()*this.scaleX)/2;this.x=i},e._i=function(){return null==this.inst&&(this.inst=new e),this.inst},e}(GameUtil.BassPanel);egret.registerClass(AdaptGamelayer,"AdaptGamelayer");var MyBitmap=function(t){function e(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),t.call(this),this.init(e,i,n)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(t,e,i){this.texture=t,this.$setX(e),this.$setY(i),this.setanchorOff(.5,.5)},n.setNewTexture=function(t){this.texture=t},n.setanchorOff=function(t,e){this.anchorOffsetX=this.$getWidth()*t,this.anchorOffsetY=this.$getHeight()*e},e}(egret.Bitmap);egret.registerClass(MyBitmap,"MyBitmap");var Animation=function(t){function e(e,i,n,a,s){t.call(this,RES.getRes(e+"1_png"),a,s),this.currentNumber=0,this.countNumber=0,this.bLoopCount=0,this.endcallfun=null,this.thisObj=null,this.params=[],this.bremove=!0,this.bpause=!1,this.textureName=e,this.totalNumber=i,this.frameRate=n}__extends(e,t);var i=(__define,e),n=i.prototype;return n.setLoop=function(t){0==t&&(t=1),this.bLoopCount=t-1},n.setRemove=function(t){this.bremove=t},n.play=function(){this.intervaltag=egret.setInterval(this.run,this,this.frameRate)},n.run=function(){this.nextFrame()},n.pause=function(){this.bpause=!0},n.resume=function(){this.bpause=!1},n.stop=function(){egret.clearInterval(this.intervaltag)},n.nextFrame=function(){if(!this.bpause){if(this.currentNumber++,this.currentNumber>=this.totalNumber){if(this.currentNumber=1,0==this.bLoopCount)return this.stop(),null!=this.endcallfun&&this.endcallfun.apply(this.thisObj,this.params),void(this.bremove&&this.parent.removeChild(this));this.bLoopCount>0&&this.bLoopCount--}this.setNewTexture(RES.getRes(this.textureName+this.currentNumber+"_png"))}},n.switchani=function(t,e,i,n,a){void 0===i&&(i=-1),void 0===n&&(n=!0),void 0===a&&(a=this.frameRate),this.stop(),this.textureName=t,this.totalNumber=e,this.currentNumber=0,this.bLoopCount=i,this.bremove=n,this.frameRate=a,this.play()},n.setendcall=function(t,e,i){this.thisObj=e,this.endcallfun=t,this.params=i},e}(MyBitmap);egret.registerClass(Animation,"Animation");var DateUtils=function(){function t(){}var e=(__define,t);e.prototype;return t.getFormatBySecond=function(t,e){void 0===e&&(e=1);var i="";switch(e){case 1:i=this.getFormatBySecond1(t);break;case 2:i=this.getFormatBySecond2(t);break;case 3:i=this.getFormatBySecond3(t);break;case 4:i=this.getFormatBySecond4(t);break;case 5:i=this.getFormatBySecond5(t)}return i},t.getFormatBySecond1=function(t){void 0===t&&(t=0);var e,i=Math.floor(t/3600);e=0==i?"00":10>i?"0"+i:""+i;var n,a,s=Math.floor((t-3600*i)/60),r=Math.floor((t-3600*i)%60);return n=0==s?"00":10>s?"0"+s:""+s,a=0==r?"00":10>r?"0"+r:""+r,e+":"+n+":"+a},t.getFormatBySecond3=function(t){void 0===t&&(t=0);var e,i,n=Math.floor(t/3600),a=Math.floor((t-3600*n)/60),s=Math.floor((t-3600*n)%60);return e=0==a?"00":10>a?"0"+a:""+a,i=0==s?"00":10>s?"0"+s:""+s,e+":"+i},t.getFormatBySecond2=function(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),s=e.getHours(),r=e.getMinutes(),o=e.getSeconds();return i+"-"+n+"-"+a+" "+s+":"+r+":"+o},t.getFormatBySecond4=function(t){var e=Math.floor(t/3600);return e>0?e>24?Math.floor(e/24)+"天前":e+"小时前":Math.floor(t/60)+"分钟前"},t.getFormatBySecond5=function(t){var e=86400,i=3600,n=60,a=Math.floor(t/e),s=Math.floor(t%e/i),r=Math.floor((t-s*i)/n),o=Math.floor((t-s*i)%n),h="",l="",u="",c="";return t>0?0==a?(h="",0==s?(l="",0==r?(u="",c=0==o?"":10>o?"0"+o+"秒":""+o+"秒"):(u=""+r+"分",c=0==o?"":10>o?"0"+o+"秒":""+o+"秒",u+c)):(l=s+"小时",0==r?(u="",c=0==o?"":10>o?"0"+o+"秒":""+o+"秒"):(u=10>r?"0"+r+"分":""+r+"分",l+u))):(h=a+"天",l=0==s?"":10>s?"0"+s+"小时":""+s+"小时",h+l):""},t}();egret.registerClass(DateUtils,"DateUtils");var SoundName;!function(t){t[t.startgamebgm=0]="startgamebgm",t[t.gamebgm=1]="gamebgm",t[t.bowatt=2]="bowatt",t[t.enemyatt=3]="enemyatt",t[t.spearatt=4]="spearatt",t[t.die=5]="die",t[t.fail=6]="fail",t[t.goal=7]="goal",t[t.beatt=8]="beatt",t[t.click=9]="click",t[t.end=10]="end"}(SoundName||(SoundName={}));var SceneEffect;!function(t){t[t.NullAction=0]="NullAction",t[t.CrossLeft=1]="CrossLeft",t[t.TransAlpha=2]="TransAlpha",t[t.OpenDoor=3]="OpenDoor"}(SceneEffect||(SceneEffect={}));var GameConfig=function(){function t(){this.initconfigdata()}var e=(__define,t),i=e.prototype;return i.initconfigdata=function(){this.bguidedone=!0,this.bfirstplay=!1,GameUtil.readLocalData(t.FIRSTGAME)||(GameUtil.saveLocalData(t.FIRSTGAME,"1"),GameUtil.saveLocalData(t.GAMESOUND,"1"),GameUtil.saveLocalData(t.GAMEMUSIC,"1"),this.bfirstplay=!0),this.bgamemusic=1==parseInt(GameUtil.readLocalData(t.GAMEMUSIC))?!0:!1,this.bgamesound=1==parseInt(GameUtil.readLocalData(t.GAMESOUND))?!0:!1},t.getSW=function(){return egret.MainContext.instance.stage.stageWidth},t.getSH=function(){return egret.MainContext.instance.stage.stageHeight},t._i=function(){return null==this._instance&&(this._instance=new t),this._instance},t.DEBUG=!0,t.IP="api.h5.gamexun.com",t.GAMENAME="bubblefightv02",t.SERVERNAME="children",t.FIRSTGAME="firstgame",t.GAMESOUND="gamesound",t.GAMEMUSIC="gamemusic",t.SoundName=["startgamebgm.mp3","gamebgm.mp3","bowatt.mp3","enemyatt.mp3","spearatt.mp3","die.mp3","fail.mp3","goal.mp3","beatt.mp3","click.mp3"],t.GUIDESTEPNUM=2,t.DesignWidth=750,t.DesignHeight=1334,t.WeiXinstr="micromessenger",t.Androidstr="android",t.Iphone="iPhone",t.PLAYERLIFE=20,t.PLAYERENERGY=20,t.PLAYERSPEARPOW=2,t.PLAYERBOWPOW=1,t._instance=null,t}();egret.registerClass(GameConfig,"GameConfig");var GetImageByUrl=function(t){function e(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),t.call(this),this.imgUrl=e,this.imgwidth=i,this.imgheight=n,this.init()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(){RES.getResByUrl(this.imgUrl,this.comp,this,RES.ResourceItem.TYPE_IMAGE)},n.comp=function(t){this.imag=new egret.Bitmap,this.imag.texture=t,this.addChild(this.imag),0!=this.imgwidth&&(this.imag.width=this.imgwidth),0!=this.imgheight&&(this.imag.height=this.imgheight),this.imag.anchorOffsetX=this.imgwidth/2,this.imag.anchorOffsetY=this.imgheight/2},n.getimg=function(){return this.imag},e}(egret.DisplayObjectContainer);egret.registerClass(GetImageByUrl,"GetImageByUrl");var GameUtil;!function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),t.call(this),this.imgUrl=e,this.imgwidth=i,this.imgheight=n,this.init()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(){RES.getResAsync(this.imgUrl,this.comp,this)},n.comp=function(t){this.imag=new egret.Bitmap,this.imag.texture=t,this.addChild(this.imag),0!=this.imgwidth&&(this.imag.width=this.imgwidth),0!=this.imgheight&&(this.imag.height=this.imgheight),this.imag.anchorOffsetX=this.imgwidth/2,this.imag.anchorOffsetY=this.imgheight/2},e}(egret.DisplayObjectContainer);t.GetResByany=e,egret.registerClass(e,"GameUtil.GetResByany")}(GameUtil||(GameUtil={}));var GuideLayer=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(){this.guidestep=0,GameConfig._i().bguidedone=!1,this.touchEnabled=!0;var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,.6);t.name="coversp",this.addChild(t),this.creatstepthing(),this.tipframe=new MyBitmap(RES.getRes("guidetipframe_png"),0,0),this.addChild(this.tipframe),this.hand=new MyBitmap(RES.getRes("guidehand_png"),0,0),this.addChild(this.hand),this.tiptext=new GameUtil.MyTextField(0,0,30,0,0),this.tiptext.setText(""),this.tiptext.textColor=31398,this.tiptext.width=346,this.addChild(this.tiptext),this.Guidestep()},n.creatstepthing=function(){},n.Guidestep=function(){var t=this.guidestep;switch(t){case 0:this.tipframe.x=this.mStageW/2,this.tipframe.y=this.mStageH-550,GameUtil.relativepos(this.hand,this.tipframe,237,234),GameUtil.relativepos(this.tiptext,this.tipframe,70,36),this.tiptext.text="在摇杆范围内滑动手指可使角色四向移动，点击中间位置可施放炸弹.";break;case 1:this.tiptext.text="点击屏幕任意地方继续游戏。";var e=this;this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.checkdone()},this)}},n.checkdone=function(){this.guidestep++,this.guidestep!=GameConfig.GUIDESTEPNUM?this.Guidestep():(GameConfig._i().bguidedone=!0,this.removeChildren(),this.parent.removeChild(this),e.remove())},e.remove=function(){this._inst=null},e._i=function(){return this._inst=null==this._inst?new e:this._inst},e._inst=null,e}(GameUtil.BassPanel);egret.registerClass(GuideLayer,"GuideLayer");var GameUtil;!function(t){var e=function(){function e(t,e){void 0===t&&(t=egret.URLRequestMethod.POST),void 0===e&&(e=egret.URLLoaderDataFormat.TEXT),this.init(t,e)}var i=(__define,e),n=i.prototype;return n.init=function(t,e){void 0===t&&(t=egret.URLRequestMethod.POST),void 0===e&&(e=egret.URLLoaderDataFormat.TEXT),this.urlLoader=new egret.URLLoader,this.urlLoader.dataFormat=e,this.urlLoader.addEventListener(egret.Event.COMPLETE,this.loaded,this),this.urlRequest=new egret.URLRequest,this.urlRequest.method=t},n.loaded=function(t){this.urlLoader.removeEventListener(egret.Event.COMPLETE,this.loaded,this),this.thisObj.removeChild(this.coverBg);var e=JSON.parse(this.urlLoader.data);null!=this.onLoader&&this.onLoader.apply(this.thisObj,[e])},n.send=function(e,i,n,a,s){void 0===n&&(n=null),void 0===a&&(a=null),void 0===s&&(s=GameConfig.IP),this.urlRequest.url="Http://"+s+i,this.onLoader=n,this.thisObj=a;var r=new egret.URLVariables(t.objectToString(e));this.urlRequest.data=r,this.urlLoader.addEventListener(egret.Event.COMPLETE,this.loaded,this),this.urlLoader.load(this.urlRequest),this.coverBg=t.createRect(0,0,GameConfig.getSW(),GameConfig.getSH(),0),this.thisObj.addChild(this.coverBg),this.coverBg.touchEnabled=!0},n.setReqMethod=function(t){this.urlRequest.method=t},e.getinstance=function(t,i){return void 0===t&&(t=egret.URLRequestMethod.POST),void 0===i&&(i=egret.URLLoaderDataFormat.TEXT),null==e._instance&&(e._instance=new e(t,i)),e._instance},e}();t.Http=e,egret.registerClass(e,"GameUtil.Http")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,n,a,s){void 0===a&&(a=.5),void 0===s&&(s=.5),t.call(this),this.init(e,i,n,a,s)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(t,e,i,n,a){this.textColor=0,this.fontFamily="楷体",this.$setX(t),this.$setY(e),this.$setSize(i),this.anchorX=n,this.anchorY=a},n.setText=function(t){this.text=t,this.setanchorOff(this.anchorX,this.anchorY)},n.setSize=function(t){this.size=t,this.setanchorOff(this.anchorX,this.anchorY)},n.setanchorOff=function(t,e){this.anchorOffsetX=this.$getWidth()*t,this.anchorOffsetY=this.$getHeight()*e},e}(egret.TextField);t.MyTextField=e,egret.registerClass(e,"GameUtil.MyTextField")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,n,a,s,r,o){void 0===r&&(r=.5),void 0===o&&(o=.5),t.call(this,e,i,n,r,o),this.width=a,this.height=n,this.type=egret.TextFieldType.INPUT,this.baseText="",this.addEventListener(egret.FocusEvent.FOCUS_IN,this.onFocusIn,this),this.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onFocusOut,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.setBaseText=function(t,e){this.baseText=t,this.baseTextAlpha=e,this.setText(this.baseText),this.alpha=this.baseTextAlpha},n.setBaseTextSize=function(t,e){this.basetextsize=t,this.sourcesize=e,this.text==this.baseText&&(this.setSize(this.basetextsize),this.height=t)},n.onFocusIn=function(t){this.text==this.baseText&&(this.setText(""),this.height=this.sourcesize,this.setSize(this.sourcesize),this.alpha=1)},n.onFocusOut=function(t){""==this.text&&(this.setText(this.baseText),this.alpha=this.baseTextAlpha,this.height=this.basetextsize,this.setSize(this.basetextsize))},e}(t.MyTextField);t.InputTextFiled=e,egret.registerClass(e,"GameUtil.InputTextFiled")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(){function t(t,e){this.loadedfun=t,this.thisObj=e,this.loadingRes()}var e=(__define,t),i=e.prototype;return i.loadingRes=function(){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},i.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preloading")},i.onResourceLoadComplete=function(t){"preloading"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadedfun.apply(this.thisObj))},i.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},i.onResourceProgress=function(t){"preloading"==t.groupName},t}();t.LoadingLogopre=e,egret.registerClass(e,"GameUtil.LoadingLogopre")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i,n,a,s,r){void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=!1),void 0===r&&(r=4),e.call(this),this.loadedfun=t,this.thisObj=i,this.IsGif=s,this.gifTotalcount=r,this.loadingbarOffX=n,this.loadingbarOffY=a}__extends(i,e);var n=(__define,i),a=n.prototype;return a.init=function(){new t.LoadingLogopre(this.onComplete,this),t.isSomeType(GameConfig.Iphone)||this.loadsound()},a.loadsound=function(){for(var t=0;t<GameConfig.SoundName.length;t++){var e=GameConfig.SoundName[t];GameData._i().gamesound[t]=new MySound(e);var i=e.indexOf("bgm")>0?egret.Sound.MUSIC:egret.Sound.EFFECT;GameData._i().gamesound[t].soundtype=i}},a.onComplete=function(t){if(this.IsGif)this.gifruncount=0,this.loadingbar=new MyBitmap(RES.getRes("loadinggif0_png"),this.mStageW/2+this.loadingbarOffX,this.mStageH/2+this.loadingbarOffY),this.addChild(this.loadingbar),egret.setInterval(this.rungif,this,150);else{this.loadingbar=new MyBitmap(RES.getRes("loadingbar_png"),this.loadingbarOffX,this.mStageH/2+this.loadingbarOffY),this.loadingbar.x=(this.mStageW-this.loadingbar.texture.textureWidth)/2,this.loadingbar.anchorOffsetX=0;var e=this.loadingbar.texture.textureWidth-8,i=this.loadingbar.texture.textureHeight-8,n=new egret.Rectangle(4,4,e,i);this.loadingbar.scale9Grid=n,this.addChild(this.loadingbar),this.loadingbar.width=10}this.loadingRes()},a.rungif=function(){this.gifruncount++,this.gifruncount>=this.gifTotalcount&&(this.gifruncount=0),this.loadingbar.setNewTexture(RES.getRes("loadinggif"+this.gifruncount+"_png"))},a.loadingRes=function(){this.loadingView=new LoadingUI,this.loadingView.x=this.mStageW/2,this.loadingView.y=this.mStageH/2+this.loadingbarOffY+30,this.addChild(this.loadingView),this.loadingView.anchorOffsetX=this.loadingView.width/2,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")
},a.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")},a.onResourceLoadComplete=function(t){"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadedfun.apply(this.thisObj))},a.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},a.onResourceProgress=function(t){"preload"==t.groupName&&(this.IsGif||this.setPro(t.itemsLoaded/t.itemsTotal),this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal))},a.setPro=function(t){this.loadingbar.width=this.loadingbar.texture.textureWidth*t},a.getPro=function(){return this.loadingbar.width/this.loadingbar.texture.textureWidth},i}(t.BassPanel);t.LoadingPanel=e,egret.registerClass(e,"GameUtil.LoadingPanel")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i,n,a,s){void 0===a&&(a=null),void 0===s&&(s=null),e.call(this),this.menuNormalTexture=null,this.menuSelectTexture=null,this.bScaleMode=!1,this.mScale=.9,this.isActive=!1,this.thisObj=t,this.param=s,this.init(i,n,a)}__extends(i,e);var n=(__define,i),a=n.prototype;return a.init=function(t,e,i){void 0===i&&(i=null),this.btnsound=null,this.menuNormalTexture=RES.getRes(t),this.menuSelectTexture=RES.getRes(e),this.backFun=i,this.btnImg=new MyBitmap(this.menuNormalTexture,0,0),this.addChild(this.btnImg),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.TouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.TouchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.TouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.TouchCancel,this)},a.setBackFun=function(t){this.backFun=t},a.setBtnSound=function(t){this.btnsound=t},a.setScaleMode=function(t){void 0===t&&(t=.9),this.bScaleMode=!0,this.mScale=t},a.setButtonTexture=function(t,e){this.menuNormalTexture=RES.getRes(t),this.menuSelectTexture=RES.getRes(e),this.btnImg.setNewTexture(this.menuNormalTexture)},a.addButtonImg=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.addImg=new MyBitmap(RES.getRes(t),e,i),this.addChild(this.addImg)},a.setAddImgTexture=function(t){this.addImg.setNewTexture(RES.getRes(t))},a.addButtonText=function(e,i,n,a){void 0===n&&(n=0),void 0===a&&(a=0),null!=this.btnImg.texture?this.mTextField=new t.MyTextField(n,a,i):this.mTextField=new t.MyTextField(n,a,i),this.mTextField.setText(e),this.addChild(this.mTextField)},a.getBtnText=function(){return this.mTextField},a.setBtnScale=function(t,e){this.btnImg.scaleX=t,this.btnImg.scaleY=e},a.TouchBegin=function(t){this.btnsound&&this.btnsound.play(),this.btnImg.setNewTexture(this.menuSelectTexture),this.bScaleMode&&(this.scaleX=this.scaleY=this.mScale),this.isActive=!0},a.TouchMove=function(t){},a.TouchEnd=function(t){this.btnImg.setNewTexture(this.menuNormalTexture),this.bScaleMode&&(this.scaleX=this.scaleY=1),this.isActive&&this.backFun.apply(this.thisObj,this.param),this.isActive=!1},a.TouchCancel=function(t){this.btnImg.setNewTexture(this.menuNormalTexture),this.bScaleMode&&(this.scaleX=this.scaleY=1),this.isActive=!1},i}(egret.DisplayObjectContainer);t.Menu=e,egret.registerClass(e,"GameUtil.Menu")}(GameUtil||(GameUtil={}));var MySound=function(){function t(t){this.isadddone=!1,this.init(t)}var e=(__define,t),i=e.prototype;return i.init=function(t){this.sound=new egret.Sound;var e=this;this.sound.addEventListener(egret.Event.COMPLETE,function(t){e.isadddone=!0},this),this.sound.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){console.log("loaded error!")},this),this.sound.load("resource/assets/sound/"+t)},i.play=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=1),this.soundtype!=egret.Sound.EFFECT||GameConfig._i().bgamesound){var i=this.sound;this.isadddone&&(this.soundchannel=i.play(t,e))}},i.stop=function(){this.soundchannel&&this.soundchannel.stop()},i.setvolume=function(t){this.soundchannel&&(this.soundchannel.volume=t)},t}();egret.registerClass(MySound,"MySound");var GameUtil;!function(t){var e=function(t){function e(e,i,n,a,s,r){void 0===s&&(s=0),void 0===r&&(r=.5),t.call(this),this.mPercent=100,this.init(e,i,n,a,s,r)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(t,e,i,n,a,s){this.progressbar=new MyBitmap(RES.getRes(t),e,i),this.addChild(this.progressbar),this.progressbar.scale9Grid=n,this.progressbar.setanchorOff(a,s)},n.setbarX=function(t){this.progressbar.x=t},n.setbarY=function(t){this.progressbar.y=t},n.setPercent=function(t){0>t||(this.mPercent=t,this.updateWidth())},n.getPercent=function(){return this.mPercent},n.updateWidth=function(){this.progressbar.width=this.progressbar.texture.textureWidth*this.mPercent},e}(egret.DisplayObjectContainer);t.ProgressBar=e,egret.registerClass(e,"GameUtil.ProgressBar")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i){e.call(this),this.item=[],this.curseltTag=0,this.itemCount=-1,this.normalTexture=t,this.selectTexture=i,this.init()}__extends(i,e);var n=(__define,i),a=n.prototype;return a.init=function(){},a.addItem=function(e,i,n){this.itemCount++;var a=new egret.DisplayObjectContainer,s=new t.Menu(this,this.normalTexture,this.normalTexture,this.chooseButton,[this.itemCount]);s.x=i,s.y=n,a.addChild(s),e.x=i+s.width/2+e.width/2,e.y=n,a.addChild(e),this.item.push(s),this.addChild(a),0==this.itemCount&&s.setButtonTexture(this.selectTexture,this.selectTexture)},a.chooseButton=function(t){if(t!=this.curseltTag){var e=this.item[t];e.setButtonTexture(this.selectTexture,this.selectTexture);var i=this.item[this.curseltTag];i.setButtonTexture(this.normalTexture,this.normalTexture),this.curseltTag=t}},a.getCurSelectTag=function(){return this.curseltTag},i}(egret.DisplayObjectContainer);t.RadioButton=e,egret.registerClass(e,"GameUtil.RadioButton")}(GameUtil||(GameUtil={}));var RandomUtils=function(){function t(){}var e=(__define,t);e.prototype;return t.limit=function(t,e){t=Math.min(t,e),e=Math.max(t,e);var i=e-t;return t+Math.random()*i},t.limitInteger=function(t,e){return Math.floor(this.limit(t,e+1))},t.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},t}();egret.registerClass(RandomUtils,"RandomUtils");var GameUtil;!function(t){var e=function(t){function e(e,i,n){void 0===n&&(n=.5),t.call(this),this.scrollview=new egret.ScrollView,this.content=new egret.DisplayObjectContainer,this.addChild(this.scrollview),this.scrollview.width=e,this.scrollview.height=i,this.scrollview.scrollSpeed=n,this.init()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(){this.scrollview.setContent(this.content)},n.putItem=function(t){this.content.addChild(t)},n.clearItem=function(){this.content.removeChildren()},n.getScorllTop=function(){return this.scrollview.scrollTop},n.setScorllTop=function(t){this.scrollview.scrollTop=t},n.getScorllView=function(){return this.scrollview},e}(egret.DisplayObjectContainer);t.ScrollView=e,egret.registerClass(e,"GameUtil.ScrollView")}(GameUtil||(GameUtil={}));var SharePage=function(t){function e(){t.call(this),this.desctext="盛讯小游戏--泡泡大作战",this.newurl="http://bubblefightv02.h5.gamexun.com/"}__extends(e,t);var i=(__define,e),n=i.prototype;return n.getSignPackage=function(){var t=encodeURIComponent(window.location.href.split("#")[0]),e={url:t};GameUtil.Http.getinstance().send(e,"/weixinshare/share",this.share,this,"api.h5.gamexun.com")},n.share=function(t){console.log("data======",t),wx.config({debug:!1,appId:t.appId,timestamp:Number(t.timestamp),nonceStr:t.noncestr,signature:t.sign,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]}),this.getWeiXinShareTimeline(),this.getWeiXinShareAppMessage()},n.setdesctext=function(t){this.desctext=t,this.getWeiXinShareAppMessage(),this.getWeiXinShareTimeline()},n.setNewUrl=function(t){this.newurl=t,this.getWeiXinShareAppMessage(),this.getWeiXinShareTimeline()},n.getWeiXinShareTimeline=function(){var t=new BodyMenuShareTimeline;t.title=this.desctext,t.link=this.newurl,t.imgUrl="http://bubblefightv02.h5.gamexun.com/shareicon.png",t.trigger=function(){},t.success=function(){},t.cancel=function(){},t.fail=function(t){},wx.onMenuShareTimeline(t)},n.getWeiXinShareAppMessage=function(){var t=new BodyMenuShareAppMessage;t.title="盛讯小游戏--泡泡大作战",t.desc=this.desctext,t.link=this.newurl,t.imgUrl="http://bubblefightv02.h5.gamexun.com/shareicon.png",t.trigger=function(){},t.success=function(){},t.cancel=function(){},t.fail=function(t){},wx.onMenuShareAppMessage(t)},e._i=function(){return null==this.inst&&(this.inst=new e),this.inst},e}(egret.DisplayObjectContainer);egret.registerClass(SharePage,"SharePage");var Timercontrol=function(){function t(t,e){void 0===e&&(e=0),this.timer=new egret.Timer(t,e),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this)}var e=(__define,t),i=e.prototype;return i.init=function(t,e,i){console.log("inittime"),this.tagetobj=t,this.fun=e,this.params=i},i.start=function(){this.timer.start()},i.stop=function(){this.timer.stop()},i.timerFunc=function(t){this.tagetobj&&this.fun.apply(this.tagetobj,this.params)},t}();egret.registerClass(Timercontrol,"Timercontrol");var GameUtil;!function(t){var e=function(e){function i(t,i,n,a){void 0===n&&(n=!1),void 0===a&&(a=1200),e.call(this),this.textsize=30,this.tipText=i,this.tipImg=t,this.bDisappear=n,this.disSecond=a,this.init()}__extends(i,e);var n=(__define,i),a=n.prototype;return a.init=function(){if(this.showtip(),!this.bDisappear){var e=t.createRect(0,0,GameConfig.getSW(),GameConfig.getSH(),.4);this.addChild(e),this.touchEnabled=!0}if(null==this.tipImg){var i=t.createRect(GameConfig.getSW()/2,GameConfig.getSH()/2,2*this.text.width,1.5*this.text.height,1,9210760);i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,this.addChild(i)}else this.tipbg=new MyBitmap(RES.getRes(this.tipImg),GameConfig.getSW()/2,GameConfig.getSH()/2),this.addChild(this.tipbg);if(this.bDisappear){var n=egret.Tween.get(this);n.to({alpha:1},300).to({alpha:0},this.disSecond).call(this.close,this)}else this.showbutton();this.addChild(this.text)},a.showtip=function(){this.text=new t.MyTextField(GameConfig.getSW()/2,GameConfig.getSH()/2,this.textsize),this.text.setText(this.tipText),this.text.textColor=0},a.setTextwidth=function(t){this.text.width=t},a.setTextSize=function(t){this.text.setSize(t)},a.setTextHor=function(t,e,i,n){this.text.textAlign=i,this.text.x=GameConfig.getSW()/2-this.tipbg.width/2+n},a.setTextlineSpacing=function(t){this.text.lineSpacing=t},a.showbutton=function(){var e=new t.Menu(this,"acceptBtn_png","acceptBtn_png",this.close);e.x=GameConfig.getSW()/2,e.y=GameConfig.getSH()/2+this.tipbg.texture.textureHeight/2,this.addChild(e),e.setScaleMode()},a.close=function(){this.parent.removeChild(this)},i}(egret.DisplayObjectContainer);t.TipsPanel=e,egret.registerClass(e,"GameUtil.TipsPanel")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t){void 0===t&&(t=0),e.call(this),this.init(t)}__extends(i,e);var n=(__define,i),a=n.prototype;return a.init=function(e){this.coverBg=t.createRect(0,0,640,1136,0),this.addChild(this.coverBg),this.touchEnabled=!0},a.setAlpha=function(t){this.coverBg.alpha=t},i.getInstace=function(){return null==this._instance&&(this._instance=new t.WaitServerPanel(0)),this._instance},i}(egret.DisplayObjectContainer);t.WaitServerPanel=e,egret.registerClass(e,"GameUtil.WaitServerPanel")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){function e(t,e,i,n,a,s){void 0===a&&(a=1),void 0===s&&(s=0);var r=new egret.Shape;return r.x=t,r.y=e,r.graphics.beginFill(s,a),r.graphics.drawRect(0,0,i,n),r.graphics.endFill(),r}function i(t,e,i,n,a){void 0===n&&(n=1),void 0===a&&(a=0);var s=new egret.Shape;return s.x=t,s.y=e,s.graphics.beginFill(a,n),s.graphics.drawCircle(0,0,i),s.graphics.endFill(),s}function n(t){var e="";for(var i in t){var n=i+"="+t[i];e+=n+"&"}return e=e.substr(0,e.length-1)}function a(t){return/^[\u4e00-\u9fa5]+$/.test(t)}function s(t){return t=t.replace(/^/,"")}function r(t){return t=t.toUpperCase(),/^0\d{2,3}-?\d{7,11}$|^1\d{10}$/.test(t)}function o(t,e){egret.localStorage.setItem(t,e)}function h(t){return egret.localStorage.getItem(t)}function l(t){null!=t?egret.localStorage.removeItem(t):egret.localStorage.clear()}function u(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?decodeURI(i[2]):null}function c(t){return t>=GameConfig.DesignHeight/2?GameConfig.getSH()-(GameConfig.DesignHeight-t):t}function g(e,i,n,a,s,r){void 0===r&&(r=GameConfig.IP);for(var o,h=window.getIP,l=0;l<h.split("|").length;l++)if(h.split("|")[l].length>6){o=h.split("|")[l];break}var u={openId:i,amount:e,ip:o,nickname:n,gameid:0};t.Http.getinstance().send(u,"/weixinpay/pay",a,s,r)}function d(t){var e=window.navigator.userAgent.toLowerCase();return-1!=e.indexOf(t)?!0:!1}function m(t,e,i,n,a){void 0===a&&(a=!1),a||(t.x=e.x-e.width/2+i,t.y=e.y-e.height/2+n)}function f(t){return GameConfig.getSW()-t}function p(t){return GameConfig.getSH()-t}function v(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];t[0]="[DebugLog]"+t[0],console.log.apply(console,t)}function y(t,e){return t>e?t:e}function S(t,e){return e>t?t:e}function C(t){for(var e=0;e<t.length;e++){var i=t[e];egret.clearInterval(i)}t=[]}t.createRect=e,t.createCircle=i,t.objectToString=n,t.isChineseName=a,t.removeimag=s,t.isPhoneNum=r,t.saveLocalData=o,t.readLocalData=h,t.clearLocalData=l,t.getQueryString=u,t.setscreenY=c,t.getredPack=g,t.isSomeType=d,t.relativepos=m,t.absposx=f,t.absposy=p,t.trace=v,t.MAX=y,t.MIN=S,t.clearinterval=C}(GameUtil||(GameUtil={}));var Lifesprite=function(t){function e(e){t.call(this,[e])}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(t){this.lifecount=t[0],this.life=t[0];var e=new MyBitmap(RES.getRes("lifeframe_png"));this.addChild(e),this.lifebar=new MyBitmap(RES.getRes("lifebar_png")),this.lifebar.setanchorOff(0,.5),this.addChild(this.lifebar),GameUtil.relativepos(this.lifebar,e,42,18),this.lifemask=new MyBitmap(this.lifebar.texture,this.lifebar.x,this.lifebar.y),this.lifemask.setanchorOff(0,.5),this.addChild(this.lifemask),this.lifebar.mask=this.lifemask},n.addlife=function(t){var e=this.lifecount+t;this.lifecount=GameUtil.MIN(e,this.life),this.updatalifebar()},n.sublife=function(t){var e=this.lifecount-t;this.lifecount=GameUtil.MAX(e,0),this.updatalifebar()},n.updatalifebar=function(){this.lifemask.width=this.lifebar.width*(this.lifecount/this.life),this.lifebar.mask=this.lifemask},n.getlife=function(){return this.lifecount},n.setlife=function(t){this.lifecount=t,this.updatalifebar()},e}(GameUtil.BassPanel);egret.registerClass(Lifesprite,"Lifesprite");var LoadingUI=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},n.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){PlayerData._i().UserInfo.openid=GameUtil.getQueryString("openid"),PlayerData._i().UserInfo.shareopenid=GameUtil.getQueryString("shareopenid"),GameConfig.DEBUG?(this.stage.scaleMode=egret.StageScaleMode.FIXED_NARROW,this.stage.setContentSize(GameConfig.DesignWidth,GameConfig.DesignHeight),GameUtil.GameScene.init(this.stage),GameUtil.GameScene.runscene(new GameUtil.LoadingPanel(this.createGameScene,this,0,0))):GameUtil.getQueryString("openid")?(GameUtil.getQueryString("shareopenid")?PlayerData._i().UserInfo.shareopenid=GameUtil.getQueryString("shareopenid"):PlayerData._i().UserInfo.shareopenid=null,this.stage.scaleMode=egret.StageScaleMode.FIXED_NARROW,this.stage.setContentSize(GameConfig.DesignWidth,GameConfig.DesignHeight),GameUtil.GameScene.init(this.stage),GameUtil.GameScene.runscene(new GameUtil.LoadingPanel(this.createGameScene,this,0,0))):GameUtil.getQueryString("shareopenid")?window.location.href="http://api.h5.gamexun.com/weixin/auth?game_redirecturl=http://bubblefightv02.h5.gamexun.com/&shareopenid="+GameUtil.getQueryString("shareopenid"):window.location.href="http://api.h5.gamexun.com/weixin/auth?game_redirecturl=http://bubblefightv02.h5.gamexun.com/"},n.createGameScene=function(){GameUtil.Http.getinstance(),GameUtil.GameScene.runscene(new StartGameScene)},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var Direction;!function(t){t[t.UP=0]="UP",t[t.RIGHT=1]="RIGHT",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.END=4]="END"}(Direction||(Direction={}));var RoleState;!function(t){t[t.RUN=0]="RUN",t[t.ATT=1]="ATT"}(RoleState||(RoleState={}));var Weapon;!function(t){t[t.SPEAR=0]="SPEAR",t[t.BOW=1]="BOW",t[t.END=2]="END"}(Weapon||(Weapon={}));var Player=function(t){function e(){t.call(this),this.zyaniname=[["spearrun","spearatt"],["bowrun","bowatt"]],this.zyaniframe=[[8,10],[8,5]]}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(){this.batting=!1,this.adourole=new Animation("dou",10,100,this.mStageW/2,this.mStageH/2),this.addChild(this.adourole),this.adourole.setLoop(-1),this.adourole.play(),this.rolelayer=new egret.DisplayObjectContainer,this.addChild(this.rolelayer);var t=this.zyaniname[Weapon.SPEAR][RoleState.RUN],e=this.zyaniframe[Weapon.SPEAR][RoleState.RUN];this.zhaoyunrole=new Animation(t,e,80,this.mStageW/2,this.mStageH/2+100),this.zhaoyunrole.setanchorOff(.3,.5),this.addChild(this.zhaoyunrole),this.zhaoyunrole.setLoop(-1),this.zhaoyunrole.play(),this.life=new Lifesprite(GameConfig.PLAYERLIFE),this.life.x=this.adourole.x,this.life.y=this.adourole.y-this.adourole.height/2-30,this.addChild(this.life),this.createEnergy(),this.intertag=egret.setInterval(this.moving,this,100)},n.switchweapon=function(){if(!this.batting){var t=this.zyaniname[PlayerData._i().curweapon][RoleState.RUN],e=this.zyaniframe[PlayerData._i().curweapon][RoleState.RUN];this.zhaoyunrole.switchani(t,e)}},n.att=function(){if(!this.batting){PlayerData._i().curweapon==Weapon.BOW?GameData._i().gamesound[SoundName.bowatt].play():GameData._i().gamesound[SoundName.spearatt].play(),this.batting=!0;var t=this.zyaniname[PlayerData._i().curweapon][RoleState.ATT],e=this.zyaniframe[PlayerData._i().curweapon][RoleState.ATT];this.zhaoyunrole.switchani(t,e,0,!1,20),this.zhaoyunrole.setendcall(this.endatt,this)}},n.endatt=function(){this.checkattenemy(),this.batting=!1;var t=this.zyaniname[PlayerData._i().curweapon][RoleState.RUN],e=this.zyaniframe[PlayerData._i().curweapon][RoleState.RUN];this.zhaoyunrole.switchani(t,e,-1,!1,80)},n.checkattenemy=function(){for(var t=this.parent,e=t.enemyContain,i=0;i<e.numChildren;i++){var n=e.getChildAt(i);if(!n.bdie){if(PlayerData._i().curweapon!=Weapon.SPEAR){var a=new MyBitmap(RES.getRes("boweffect_png"),this.zhaoyunrole.x+50*this.zhaoyunrole.$getScaleX(),this.zhaoyunrole.y-20);this.parent.addChild(a);var s=180*Math.atan((n.getsp().y-this.zhaoyunrole.y)/(n.getsp().x-this.zhaoyunrole.x))/Math.PI;n.getsp().x<this.zhaoyunrole.x&&(s+=180),a.$setRotation(s),egret.Tween.get(a).to({x:n.getsp().x,y:n.getsp().y},200).call(function(){a.parent.removeChild(a),null!=n.parent&&n.beatt(GameConfig.PLAYERBOWPOW)},this);break}var r=this.getrect(this.zhaoyunrole,.3,.7,50*this.zhaoyunrole.$getScaleX()),o=this.getrect(n.getsp(),1,.9);r.intersects(o)&&n.beatt(GameConfig.PLAYERSPEARPOW)}}},n.moving=function(){var t=PlayerData._i().speed;switch(PlayerData._i().curDir){case Direction.UP:this.zhaoyunrole.y=GameUtil.MAX(this.zhaoyunrole.y-t,this.zhaoyunrole.height/2);var e=this.getChildIndex(this.zhaoyunrole),i=this.getChildIndex(this.adourole);this.getzytouchpoint()<this.getadtouchpoint()&&e>i&&this.swapChildren(this.zhaoyunrole,this.adourole),this.getzytouchpoint()>this.getadtouchpoint()&&i>e&&this.swapChildren(this.zhaoyunrole,this.adourole);break;case Direction.RIGHT:this.zhaoyunrole.$setScaleX(1),this.zhaoyunrole.x=GameUtil.MIN(this.zhaoyunrole.x+t,GameConfig.getSW()-this.zhaoyunrole.width/2);break;case Direction.DOWN:this.zhaoyunrole.y=GameUtil.MIN(this.zhaoyunrole.y+t,GameConfig.getSH()-this.zhaoyunrole.height/2);var e=this.getChildIndex(this.zhaoyunrole),i=this.getChildIndex(this.adourole);this.getzytouchpoint()<this.getadtouchpoint()&&e>i&&this.swapChildren(this.zhaoyunrole,this.adourole),this.getzytouchpoint()>this.getadtouchpoint()&&i>e&&this.swapChildren(this.zhaoyunrole,this.adourole);break;case Direction.LEFT:this.zhaoyunrole.$setScaleX(-1),this.zhaoyunrole.x=GameUtil.MAX(this.zhaoyunrole.x-t,this.zhaoyunrole.width/2)}},n.getzytouchpoint=function(){return this.zhaoyunrole.y+90},n.getadtouchpoint=function(){return this.adourole.y+45},n.checkrun=function(){var t=Math.abs(this.zhaoyunrole.x-this.adourole.x),e=Math.abs(this.getzytouchpoint()-this.getadtouchpoint());switch(PlayerData._i().curDir){case Direction.UP:if(this.getzytouchpoint()>this.getadtouchpoint()&&this.getzytouchpoint()-this.getadtouchpoint()<36&&140>t)return!1;break;case Direction.DOWN:if(this.getzytouchpoint()<this.getadtouchpoint()&&this.getzytouchpoint()-this.getadtouchpoint()>-36&&140>t)return!1;break;case Direction.LEFT:if(this.zhaoyunrole.x>this.adourole.x&&this.zhaoyunrole.x-this.adourole.x<158&&25>e)return!1;break;case Direction.RIGHT:if(this.zhaoyunrole.x<this.adourole.x&&this.zhaoyunrole.x-this.adourole.x>-158&&25>e)return!1}return!0},n.getrect=function(t,e,i,n){void 0===n&&(n=0);var a=t.getBounds();return a.x=t.x-t.width*e/2+n,a.y=t.y-t.height*i/2,a.width=t.width*e,a.height=t.height*i,a},n.createEnergy=function(){var t=new MyBitmap(RES.getRes("energyBottle_png"),76,88);this.addChild(t),this.energy=new GameUtil.Menu(this,"energy_png","energy_png",this.powatt),this.energy.x=76,this.energy.y=106,this.addChild(this.energy),this.energymask=GameUtil.createRect(42,150,this.energy.width,this.energy.height),this.addChild(this.energymask),this.energy.mask=this.energymask},n.powatt=function(){if(PlayerData._i().curenergy>=GameConfig.PLAYERENERGY){var t=new Animation("poweffect",18,100,this.mStageW/2,this.mStageH/2);this.addChild(t),t.play();for(var e=this.parent,i=e.enemyContain,n=0;n<i.numChildren;n++){var a=i.getChildAt(n);a.bdie||a.beatt(1e4,!0)}PlayerData._i().curenergy=0,egret.Tween.removeTweens(this.energy),this.energy.scaleX=1,this.energy.scaleY=1,this.energymask.y=150}},n.updatalife=function(){return GameData._i().GameOver?void 0:PlayerData._i().curlife<=0?(this.parent.gameover(),void GameData._i().gamesound[SoundName.fail].play()):void this.life.setlife(PlayerData._i().curlife)},n.updataenergy=function(t){this.energymask.y-=this.energy.height*(t/GameConfig.PLAYERENERGY),PlayerData._i().curenergy==GameConfig.PLAYERENERGY&&egret.Tween.get(this.energy,{loop:!0}).to({scaleX:1.1,scaleY:1.1},500).to({scaleX:1,scaleY:1},500)},n.reset=function(){this.energymask.y=150,this.updatalife()},e}(GameUtil.BassPanel);egret.registerClass(Player,"Player");var PlayerData=function(){function t(){this.UserInfo={ID:"",nickname:"",openid:"",jifen:0,killsoldier:0,killgeneral:0,shareopenid:""},this.curweapon=Weapon.END,this.initdata()}var e=(__define,t),i=e.prototype;return i.initdata=function(){this.UserInfo.jifen=0,this.UserInfo.killsoldier=0,this.UserInfo.killgeneral=0,this.speed=20,this.curweapon=this.curweapon==Weapon.END?Weapon.SPEAR:this.curweapon,this.curDir=Direction.END,this.curlife=GameConfig.PLAYERLIFE,this.curenergy=0},t._i=function(){return this._inst=null==this._inst?new t:this._inst},t._inst=null,t}();egret.registerClass(PlayerData,"PlayerData");var SharePageShow=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.show=function(){var t=this;this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.close()},this);var e=new MyBitmap(RES.getRes("sharetip_png"),this.mStageW,0);e.setanchorOff(1,0),this.addChild(e)},e}(Othercontainer);egret.registerClass(SharePageShow,"SharePageShow");var StartGameScene=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.init=function(){BGMPlayer._i().play(SoundName.startgamebgm);var t={clickopenid:"1"};GameUtil.Http.getinstance().send(t,"/"+GameConfig.SERVERNAME+"/getuserid",this.show,this)},n.show=function(t){1==t.code?(this.showbg(),PlayerData._i().UserInfo.ID=t.userid):GameUtil.trace(t.msg)},n.showbg=function(){var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,1,10416088);this.addChild(t);var e=new MyBitmap(RES.getRes("startgamebg_jpg"),this.mStageW/2,this.mStageH/2);this.addChild(e);for(var i=["startgamebtn_png","rankbtn_png","helpbtn_png","settingbtn_png","sharebtn_png"],n=[this.startgame,this.gamerank,this.gamehelp,this.setting,this.share],a=[375,375,210,540,692],s=[934,1083,1218,1218,68],r=0;r<i.length;r++){var o=new GameUtil.Menu(this,i[r],i[r],n[r]);o.setScaleMode(),this.addChild(o),o.setBtnSound(GameData._i().gamesound[SoundName.click]),GameUtil.relativepos(o,e,a[r],s[r]),4==r&&(o.x=this.mStageW-100)}GameConfig.DEBUG||(GameUtil.getQueryString("shareopenid")?this.getshare():(SharePage._i().getSignPackage(),SharePage._i().setNewUrl("http://"+GameConfig.GAMENAME+".h5.gamexun.com/?shareopenid="+PlayerData._i().UserInfo.openid)))},n.getshare=function(){var t={shareopenid:GameUtil.getQueryString("shareopenid"),clickopenid:PlayerData._i().UserInfo.openid};GameUtil.Http.getinstance().send(t,"/"+GameConfig.SERVERNAME+"/updatesharedata",this.setshareresult,this)},n.setshareresult=function(t){1==t.code?(SharePage._i().getSignPackage(),SharePage._i().setNewUrl("http://"+GameConfig.GAMENAME+".h5.gamexun.com/?shareopenid="+PlayerData._i().UserInfo.openid)):GameUtil.trace(t.msg)},n.startgame=function(){GameUtil.trace("startgame"),GameUtil.GameScene.runscene(new GameScene)},n.gamerank=function(){GameUtil.trace("gamerank"),this.addChild(new GameRankPageShow)},n.gamehelp=function(){GameUtil.trace("gamehelp"),this.addChild(new GameHelpPageShow)},n.setting=function(){GameUtil.trace("setting"),this.addChild(new GameSetting)},n.share=function(){GameUtil.trace("share"),GameUtil.isSomeType(GameConfig.WeiXinstr)?this.addChild(new SharePageShow):this.addChild(new GameUtil.TipsPanel(null,"请在微信中打开",!0))},e}(GameUtil.BassPanel);egret.registerClass(StartGameScene,"StartGameScene");var TimeType;!function(t){t[t.ADDTIME=0]="ADDTIME",t[t.SUBTIME=1]="SUBTIME"}(TimeType||(TimeType={}));var TimePanel=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initdata=function(t,e,i,n){this.timespeed=1e3,this.bpause=!1,this.type=t,this.startTime=e,this.curtime=this.startTime,i&&(this.text=new GameUtil.MyTextField(n.x,n.y,n.size),this.text.textColor=n.color,this.text.setText(DateUtils.getFormatBySecond(this.curtime)),this.addChild(this.text))},n.setTimespeed=function(t){this.timespeed=t},n.start=function(){this.curtime=this.startTime,this.updataTimetext(),this.timetag=egret.setInterval(this.runtime,this,this.timespeed)},n.pause=function(){this.bpause=!0},n.resume=function(){this.bpause=!1},n.stop=function(){this.removeInterval()},n.runtime=function(){if(!this.bpause)switch(this.type){case TimeType.ADDTIME:this.curtime++,this.updataTimetext();break;case TimeType.SUBTIME:this.curtime--,this.curtime<0&&(this.curtime=0,this.removeInterval()),this.updataTimetext()}},n.removeInterval=function(){egret.clearInterval(this.timetag)},n.getCurTime=function(){return this.curtime},n.getText=function(){return this.text?this.text:void 0},n.updataTimetext=function(){this.text&&this.text.setText(DateUtils.getFormatBySecond(this.curtime))},e}(GameUtil.BassPanel);egret.registerClass(TimePanel,"TimePanel");var qr;!function(t){var e=function(){function e(e){this.mode=t.QRMode.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var i=0,n=this.data.length;n>i;i++){var a=[],s=this.data.charCodeAt(i);s>65536?(a[0]=240|(1835008&s)>>>18,a[1]=128|(258048&s)>>>12,a[2]=128|(4032&s)>>>6,a[3]=128|63&s):s>2048?(a[0]=224|(61440&s)>>>12,a[1]=128|(4032&s)>>>6,a[2]=128|63&s):s>128?(a[0]=192|(1984&s)>>>6,a[1]=128|63&s):a[0]=s,this.parsedData.push(a)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}var i=(__define,e),n=i.prototype;return n.getLength=function(t){return this.parsedData.length},n.write=function(t){for(var e=0,i=this.parsedData.length;i>e;e++)t.put(this.parsedData[e],8)},e}();t.QR8bitByte=e,egret.registerClass(e,"qr.QR8bitByte")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){this.buffer=[],this.length=0}var e=(__define,t),i=e.prototype;return i.get=function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},i.put=function(t,e){for(var i=0;e>i;i++)this.putBit(1==(t>>>e-i-1&1))},i.getLengthInBits=function(){return this.length},i.putBit=function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++},t}();t.QRBitBuffer=e,egret.registerClass(e,"qr.QRBitBuffer")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var i=0;i<t.length&&0==t[i];)i++;this.num=new Array(t.length-i+e);for(var n=0;n<t.length-i;n++)this.num[n]=t[n+i]}var i=(__define,e),n=i.prototype;return n.get=function(t){return this.num[t]},n.getLength=function(){return this.num.length},n.multiply=function(i){for(var n=new Array(this.getLength()+i.getLength()-1),a=0;a<this.getLength();a++)for(var s=0;s<i.getLength();s++)n[a+s]^=t.QRMath.gexp(t.QRMath.glog(this.get(a))+t.QRMath.glog(i.get(s)));return new e(n,0)},n.mod=function(i){if(this.getLength()-i.getLength()<0)return this;for(var n=t.QRMath.glog(this.get(0))-t.QRMath.glog(i.get(0)),a=new Array(this.getLength()),s=0;s<this.getLength();s++)a[s]=this.get(s);for(var s=0;s<i.getLength();s++)a[s]^=t.QRMath.gexp(t.QRMath.glog(i.get(s))+n);return new e(a,0).mod(i)},e}();t.QRPolynomial=e,egret.registerClass(e,"qr.QRPolynomial")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(){}var i=(__define,e);i.prototype;return e.create=function(i,n,a,s,r){void 0===n&&(n=0),void 0===a&&(a=200),void 0===s&&(s=200),void 0===r&&(r=2);var o={width:a,height:s,correctLevel:t.QRErrorCorrectLevel.H,color:n},h=new t.QRCodeModel(t.QRUtil._getTypeNumber(i,o.correctLevel),o.correctLevel);return h.addData(i),h.make(),e.draw(h,o)},e.draw=function(t,e){for(var i=new egret.Sprite,e=e,n=t.getModuleCount(),a=Math.floor(e.width/n),s=Math.floor(e.height/n),r=0;n>r;r++)for(var o=0;n>o;o++){var h=t.isDark(r,o);h&&(i.graphics.beginFill(e.color),i.graphics.drawRect(o*a,r*s,a,s),i.graphics.endFill())}return i},e}();t.QRCode=e,egret.registerClass(e,"qr.QRCode")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(t,e){this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[],this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var i=(__define,e),n=i.prototype;return n.addData=function(e){var i=new t.QR8bitByte(e);this.dataList.push(i),this.dataCache=null},n.isDark=function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},n.getModuleCount=function(){return this.moduleCount},n.make=function(){this.makeImpl(!1,this.getBestMaskPattern())
},n.makeImpl=function(t,i){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[n][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,i),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,i)},n.setupPositionProbePattern=function(t,e){for(var i=-1;7>=i;i++)if(!(-1>=t+i||this.moduleCount<=t+i))for(var n=-1;7>=n;n++)-1>=e+n||this.moduleCount<=e+n||(i>=0&&6>=i&&(0==n||6==n)||n>=0&&6>=n&&(0==i||6==i)||i>=2&&4>=i&&n>=2&&4>=n?this.modules[t+i][e+n]=!0:this.modules[t+i][e+n]=!1)},n.getBestMaskPattern=function(){for(var e=0,i=0,n=0;8>n;n++){this.makeImpl(!0,n);var a=t.QRUtil.getLostPoint(this);(0==n||e>a)&&(e=a,i=n)}return i},n.createMovieClip=function(t,e,i){var n=t.createEmptyMovieClip(e,i),a=1;this.make();for(var s=0;s<this.modules.length;s++)for(var r=s*a,o=0;o<this.modules[s].length;o++){var h=o*a,l=this.modules[s][o];l&&(n.beginFill(0,100),n.moveTo(h,r),n.lineTo(h+a,r),n.lineTo(h+a,r+a),n.lineTo(h,r+a),n.endFill())}return n},n.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},n.setupPositionAdjustPattern=function(){for(var e=t.QRUtil.getPatternPosition(this.typeNumber),i=0;i<e.length;i++)for(var n=0;n<e.length;n++){var a=e[i],s=e[n];if(null==this.modules[a][s])for(var r=-2;2>=r;r++)for(var o=-2;2>=o;o++)-2==r||2==r||-2==o||2==o||0==r&&0==o?this.modules[a+r][s+o]=!0:this.modules[a+r][s+o]=!1}},n.setupTypeNumber=function(e){for(var i=t.QRUtil.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++){var a=!e&&1==(i>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=a}for(var n=0;18>n;n++){var a=!e&&1==(i>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=a}},n.setupTypeInfo=function(e,i){for(var n=this.errorCorrectLevel<<3|i,a=t.QRUtil.getBCHTypeInfo(n),s=0;15>s;s++){var r=!e&&1==(a>>s&1);6>s?this.modules[s][8]=r:8>s?this.modules[s+1][8]=r:this.modules[this.moduleCount-15+s][8]=r}for(var s=0;15>s;s++){var r=!e&&1==(a>>s&1);8>s?this.modules[8][this.moduleCount-s-1]=r:9>s?this.modules[8][15-s-1+1]=r:this.modules[8][15-s-1]=r}this.modules[this.moduleCount-8][8]=!e},n.mapData=function(e,i){for(var n=-1,a=this.moduleCount-1,s=7,r=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var h=0;2>h;h++)if(null==this.modules[a][o-h]){var l=!1;r<e.length&&(l=1==(e[r]>>>s&1));var u=t.QRUtil.getMask(i,a,o-h);u&&(l=!l),this.modules[a][o-h]=l,s--,-1==s&&(r++,s=7)}if(a+=n,0>a||this.moduleCount<=a){a-=n,n=-n;break}}},e.createData=function(i,n,a){for(var s=t.QRRSBlock.getRSBlocks(i,n),r=new t.QRBitBuffer,o=0;o<a.length;o++){var h=a[o];r.put(h.mode,4),r.put(h.getLength(),t.QRUtil.getLengthInBits(h.mode,i)),h.write(r)}for(var l=0,o=0;o<s.length;o++)l+=s[o].dataCount;if(r.getLengthInBits()>8*l)throw new Error("code length overflow. ("+r.getLengthInBits()+">"+8*l+")");for(r.getLengthInBits()+4<=8*l&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*l)&&(r.put(e.PAD0,8),!(r.getLengthInBits()>=8*l));)r.put(e.PAD1,8);return e.createBytes(r,s)},e.createBytes=function(e,i){for(var n=0,a=0,s=0,r=new Array(i.length),o=new Array(i.length),h=0;h<i.length;h++){var l=i[h].dataCount,u=i[h].totalCount-l;a=Math.max(a,l),s=Math.max(s,u),r[h]=new Array(l);for(var c=0;c<r[h].length;c++)r[h][c]=255&e.buffer[c+n];n+=l;var g=t.QRUtil.getErrorCorrectPolynomial(u),d=new t.QRPolynomial(r[h],g.getLength()-1),m=d.mod(g);o[h]=new Array(g.getLength()-1);for(var c=0;c<o[h].length;c++){var f=c+m.getLength()-o[h].length;o[h][c]=f>=0?m.get(f):0}}for(var p=0,c=0;c<i.length;c++)p+=i[c].totalCount;for(var v=new Array(p),y=0,c=0;a>c;c++)for(var h=0;h<i.length;h++)c<r[h].length&&(v[y++]=r[h][c]);for(var c=0;s>c;c++)for(var h=0;h<i.length;h++)c<o[h].length&&(v[y++]=o[h][c]);return v},e.PAD0=236,e.PAD1=17,e}();t.QRCodeModel=e,egret.registerClass(e,"qr.QRCodeModel")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.L=1,t.M=0,t.Q=3,t.H=2,t}();t.QRErrorCorrectLevel=e,egret.registerClass(e,"qr.QRErrorCorrectLevel")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.PATTERN000=0,t.PATTERN001=1,t.PATTERN010=2,t.PATTERN011=3,t.PATTERN100=4,t.PATTERN101=5,t.PATTERN110=6,t.PATTERN111=7,t}();t.QRMaskPattern=e,egret.registerClass(e,"qr.QRMaskPattern")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.glog=function(e){return t.isInit||t.init(),1>e&&console.log("错误:n="+e),t.LOG_TABLE[e]},t.gexp=function(e){for(t.isInit||t.init();0>e;)e+=255;for(;e>=256;)e-=255;return t.EXP_TABLE[e]},t.init=function(){t.isInit=!0;for(var e=0;8>e;e++)t.EXP_TABLE[e]=1<<e;for(var e=8;256>e;e++)t.EXP_TABLE[e]=t.EXP_TABLE[e-4]^t.EXP_TABLE[e-5]^t.EXP_TABLE[e-6]^t.EXP_TABLE[e-8];for(var e=0;255>e;e++)t.LOG_TABLE[t.EXP_TABLE[e]]=e},t.EXP_TABLE=new Array(256),t.LOG_TABLE=new Array(256),t}();t.QRMath=e,egret.registerClass(e,"qr.QRMath")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.MODE_NUMBER=1,t.MODE_ALPHA_NUM=2,t.MODE_8BIT_BYTE=4,t.MODE_KANJI=8,t}();t.QRMode=e,egret.registerClass(e,"qr.QRMode")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(t,e){this.totalCount=t,this.dataCount=e}var i=(__define,e);i.prototype;return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,i){var n=e.getRsBlockTable(t,i);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+i);for(var a=n.length/3,s=[],r=0;a>r;r++)for(var o=n[3*r+0],h=n[3*r+1],l=n[3*r+2],u=0;o>u;u++)s.push(new e(h,l));return s},e.getRsBlockTable=function(i,n){switch(n){case t.QRErrorCorrectLevel.L:return e.RS_BLOCK_TABLE[4*(i-1)+0];case t.QRErrorCorrectLevel.M:return e.RS_BLOCK_TABLE[4*(i-1)+1];case t.QRErrorCorrectLevel.Q:return e.RS_BLOCK_TABLE[4*(i-1)+2];case t.QRErrorCorrectLevel.H:return e.RS_BLOCK_TABLE[4*(i-1)+3];default:return}},e}();t.QRRSBlock=e,egret.registerClass(e,"qr.QRRSBlock")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(){}var i=(__define,e),n=i.prototype;return e.getBCHTypeInfo=function(t){for(var i=t<<10;e.getBCHDigit(i)-e.getBCHDigit(e.G15)>=0;)i^=e.G15<<e.getBCHDigit(i)-e.getBCHDigit(e.G15);return(t<<10|i)^e.G15_MASK},e.getBCHTypeNumber=function(t){for(var i=t<<12;e.getBCHDigit(i)-e.getBCHDigit(e.G18)>=0;)i^=e.G18<<e.getBCHDigit(i)-e.getBCHDigit(e.G18);return t<<12|i},e.getBCHDigit=function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},e.getPatternPosition=function(t){return e.PATTERN_POSITION_TABLE[t-1]},e.getMask=function(e,i,n){switch(e){case t.QRMaskPattern.PATTERN000:return(i+n)%2==0;case t.QRMaskPattern.PATTERN001:return i%2==0;case t.QRMaskPattern.PATTERN010:return n%3==0;case t.QRMaskPattern.PATTERN011:return(i+n)%3==0;case t.QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(n/3))%2==0;case t.QRMaskPattern.PATTERN101:return i*n%2+i*n%3==0;case t.QRMaskPattern.PATTERN110:return(i*n%2+i*n%3)%2==0;case t.QRMaskPattern.PATTERN111:return(i*n%3+(i+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},e.getErrorCorrectPolynomial=function(e){for(var i=new t.QRPolynomial([1],0),n=0;e>n;n++)i=i.multiply(new t.QRPolynomial([1,t.QRMath.gexp(n)],0));return i},e.getLengthInBits=function(e,i){if(i>=1&&10>i)switch(e){case t.QRMode.MODE_NUMBER:return 10;case t.QRMode.MODE_ALPHA_NUM:return 9;case t.QRMode.MODE_8BIT_BYTE:return 8;case t.QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(27>i)switch(e){case t.QRMode.MODE_NUMBER:return 12;case t.QRMode.MODE_ALPHA_NUM:return 11;case t.QRMode.MODE_8BIT_BYTE:return 16;case t.QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(41>i))throw new Error("type:"+i);switch(e){case t.QRMode.MODE_NUMBER:return 14;case t.QRMode.MODE_ALPHA_NUM:return 13;case t.QRMode.MODE_8BIT_BYTE:return 16;case t.QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},e.getLostPoint=function(t){for(var e=t.getModuleCount(),i=0,n=0;e>n;n++)for(var a=0;e>a;a++){for(var s=0,r=t.isDark(n,a),o=-1;1>=o;o++)if(!(0>n+o||n+o>=e))for(var h=-1;1>=h;h++)0>a+h||a+h>=e||(0!=o||0!=h)&&r==t.isDark(n+o,a+h)&&s++;s>5&&(i+=3+s-5)}for(var n=0;e-1>n;n++)for(var a=0;e-1>a;a++){var l=0;t.isDark(n,a)&&l++,t.isDark(n+1,a)&&l++,t.isDark(n,a+1)&&l++,t.isDark(n+1,a+1)&&l++,(0==l||4==l)&&(i+=3)}for(var n=0;e>n;n++)for(var a=0;e-6>a;a++)t.isDark(n,a)&&!t.isDark(n,a+1)&&t.isDark(n,a+2)&&t.isDark(n,a+3)&&t.isDark(n,a+4)&&!t.isDark(n,a+5)&&t.isDark(n,a+6)&&(i+=40);for(var a=0;e>a;a++)for(var n=0;e-6>n;n++)t.isDark(n,a)&&!t.isDark(n+1,a)&&t.isDark(n+2,a)&&t.isDark(n+3,a)&&t.isDark(n+4,a)&&!t.isDark(n+5,a)&&t.isDark(n+6,a)&&(i+=40);for(var u=0,a=0;e>a;a++)for(var n=0;e>n;n++)t.isDark(n,a)&&u++;var c=Math.abs(100*u/e/e-50)/5;return i+=10*c},n.static_isSupportCanvas=function(){return"undefined"!=typeof CanvasRenderingContext2D},e._getTypeNumber=function(i,n){for(var a=1,s=e._getUTF8Length(i),r=0,o=e.QRCodeLimitLength.length;o>=r;r++){var h=0;switch(n){case t.QRErrorCorrectLevel.L:h=e.QRCodeLimitLength[r][0];break;case t.QRErrorCorrectLevel.M:h=e.QRCodeLimitLength[r][1];break;case t.QRErrorCorrectLevel.Q:h=e.QRCodeLimitLength[r][2];break;case t.QRErrorCorrectLevel.H:h=e.QRCodeLimitLength[r][3]}if(h>=s)break;a++}if(a>e.QRCodeLimitLength.length)throw new Error("Too long data");return a},e._getUTF8Length=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)},e.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],e.G15=1335,e.G18=7973,e.G15_MASK=21522,e.QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],e}();t.QRUtil=e,egret.registerClass(e,"qr.QRUtil")}(qr||(qr={}));